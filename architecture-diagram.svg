<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="820" viewBox="0 0 1200 820">
  <defs>
    <style>
      .title { font: 700 22px 'Segoe UI', Arial, sans-serif; fill: #111827; }
      .subtitle { font: 600 16px 'Segoe UI', Arial, sans-serif; fill: #111827; }
      .text { font: 14px 'Segoe UI', Arial, sans-serif; fill: #111827; }
      .small { font: 12px 'Segoe UI', Arial, sans-serif; fill: #374151; }
      .box { fill: #ffffff; stroke: #e5e7eb; stroke-width: 2; rx: 10; }
      .boxBlue { fill: #eef2ff; stroke: #c7d2fe; stroke-width: 2; rx: 10; }
      .boxOrange { fill: #fff4ec; stroke: #fdba74; stroke-width: 2; rx: 10; }
      .boxGreen { fill: #ecfdf5; stroke: #a7f3d0; stroke-width: 2; rx: 10; }
      .boxGray { fill: #f9fafb; stroke: #e5e7eb; stroke-width: 2; rx: 10; }
      .dashed { stroke-dasharray: 6 4; }
      .arrow { stroke: #6b7280; stroke-width: 2; marker-end: url(#arrowHead); fill: none; }
      .arrowBold { stroke: #111827; stroke-width: 2.5; marker-end: url(#arrowHeadBold); fill: none; }
      .port { fill: #f59e0b; font: 12px 'Segoe UI', Arial, sans-serif; }
      .section { fill: #f3f4f6; stroke: #e5e7eb; stroke-width: 2; rx: 12; }
      .legendDot { fill: #f59e0b; }
      .note { font: 12px 'Segoe UI', Arial, sans-serif; fill: #6b7280; }
    </style>
    <marker id="arrowHead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280" />
    </marker>
    <marker id="arrowHeadBold" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#111827" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="40" y="44" class="title">Diagrama de Arquitetura - Sistema de Clientes</text>
  <text x="40" y="70" class="small">Visão atual (local) e visão proposta para AWS</text>

  <!-- LOCAL SECTION -->
  <rect x="30" y="90" width="540" height="310" class="section"/>
  <text x="50" y="118" class="subtitle">Ambiente Local</text>
  <text x="50" y="140" class="note">Fluxo: Browser → Front-End (5173) → Back-End (3000) → PostgreSQL (5432) • Métricas Prometheus</text>

  <!-- Browser -->
  <rect x="60" y="170" width="140" height="70" class="box"/>
  <text x="80" y="198" class="text">Browser</text>
  <text x="80" y="220" class="port">HTTP :5173</text>

  <!-- Front-End -->
  <rect x="250" y="160" width="220" height="90" class="boxBlue"/>
  <text x="265" y="188" class="text">Front-End</text>
  <text x="265" y="208" class="small">React + Vite</text>
  <text x="265" y="226" class="port">:5173</text>

  <!-- Back-End -->
  <rect x="250" y="270" width="220" height="110" class="boxOrange"/>
  <text x="265" y="298" class="text">Back-End</text>
  <text x="265" y="318" class="small">NestJS</text>
  <text x="265" y="336" class="port">:3000</text>

  <!-- PostgreSQL -->
  <rect x="490" y="290" width="60" height="70" class="boxGreen"/>
  <text x="495" y="315" class="small">Postgres</text>
  <text x="495" y="335" class="port">:5432</text>

  <!-- Prometheus (metrics) -->
  <rect x="490" y="170" width="60" height="70" class="boxGray"/>
  <text x="495" y="195" class="small">/metrics</text>
  <text x="497" y="215" class="small">Prom</text>

  <!-- Arrows Local -->
  <path d="M200 205 L248 205" class="arrowBold"/>
  <path d="M360 250 L360 270" class="arrowBold"/>
  <path d="M470 325 L490 325" class="arrow"/>
  <path d="M470 205 L490 205" class="arrow dashed"/>

  <!-- AWS SECTION -->
  <rect x="30" y="430" width="1140" height="360" class="section"/>
  <text x="50" y="458" class="subtitle">Arquitetura Proposta na AWS</text>
  <text x="50" y="480" class="note">CDN + SPA (CloudFront/S3) • API gerenciada (API Gateway → ECS Fargate) • Banco (RDS) • Cache (ElastiCache) • Observabilidade (CloudWatch, X-Ray)</text>

  <!-- CloudFront + S3 -->
  <rect x="60" y="510" width="240" height="120" class="boxBlue"/>
  <text x="80" y="540" class="text">CloudFront + S3</text>
  <text x="80" y="560" class="small">Frontend estático</text>
  <text x="80" y="580" class="small">Assets + SPA</text>

  <!-- Browser (AWS path) -->
  <rect x="60" y="660" width="140" height="70" class="box"/>
  <text x="80" y="688" class="text">Browser</text>
  <text x="80" y="710" class="small">HTTPS</text>

  <!-- API Gateway -->
  <rect x="360" y="520" width="200" height="80" class="box"/>
  <text x="380" y="552" class="text">API Gateway</text>
  <text x="380" y="572" class="small">HTTPS</text>

  <!-- ECS Fargate -->
  <rect x="620" y="520" width="220" height="120" class="boxOrange"/>
  <text x="640" y="548" class="text">ECS Fargate (NestJS)</text>
  <text x="640" y="568" class="small">Serviço Container</text>
  <text x="640" y="588" class="port">:3000</text>

  <!-- RDS PostgreSQL -->
  <rect x="900" y="520" width="120" height="120" class="boxGreen"/>
  <text x="910" y="548" class="text">RDS</text>
  <text x="910" y="568" class="small">PostgreSQL</text>
  <text x="910" y="588" class="small">Multi-AZ</text>
  <text x="910" y="608" class="port">:5432</text>

  <!-- ElastiCache Redis (optional) -->
  <rect x="1060" y="520" width="90" height="120" class="boxGray"/>
  <text x="1070" y="548" class="small">ElastiCache</text>
  <text x="1075" y="568" class="small">Redis</text>
  <text x="1068" y="588" class="small">(Opcional)</text>

  <!-- CloudWatch -->
  <rect x="620" y="660" width="140" height="70" class="boxGray"/>
  <text x="635" y="690" class="small">CloudWatch</text>
  <text x="633" y="710" class="small">Logs/Metrics</text>

  <!-- X-Ray -->
  <rect x="790" y="660" width="140" height="70" class="boxGray"/>
  <text x="820" y="690" class="small">X-Ray</text>
  <text x="805" y="710" class="small">Traces</text>

  <!-- Arrows AWS -->
  <path d="M130 660 L130 630 L160 630 L160 570 L300 570" class="arrowBold"/>
  <path d="M300 560 L360 560" class="arrowBold"/>
  <path d="M560 560 L620 560" class="arrowBold"/>
  <path d="M840 580 L900 580" class="arrow"/>
  <path d="M840 580 L1060 580" class="arrow dashed"/>
  <path d="M730 640 L690 660" class="arrow"/>
  <path d="M770 640 L820 660" class="arrow"/>

  <!-- Legends -->
  <circle cx="1040" cy="760" r="6" class="legendDot"/>
  <text x="1055" y="764" class="small">Portas/Endpoints chave (:5173, :3000, :5432, /metrics)</text>
  <line x1="1040" y1="780" x2="1052" y2="780" class="arrow dashed"/>
  <text x="1060" y="784" class="small">Fluxo opcional (cache Redis)</text>
</svg>


